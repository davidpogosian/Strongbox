<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="/public/css/files.css" rel="stylesheet">
	<title>Strongbox</title>
</head>
<body>
    <h1>My files</h1>
    <p>Hi {{ .profile.nickname }}</p>
    <div id="location">
        {{ if .splitPaths }}
            {{ range .splitPaths }}
                <a href="{{ .ActualPath }}">{{ .Name }}</a>
                <p>/</p>
            {{ end }}
        {{ end }}
    </div>
    <div id="drop_zone">Drag Files Here</div>
    <div id="file_list">
        {{ if .folders }}
            {{ range .folders }}
                <div class="folder">
                    <h2><a href="/files{{ $.currentPath }}/{{ .Name }}">{{ .Name }}</a></h2>
                    <button onclick="downloadFolder('{{ .S3Key }}')">Download</button>
                    <button onclick="copyDownloadFolderUrl('{{ .S3Key }}')">Copy Download URL</button>
                    <button onclick="destroy('{{ .S3Key }}')">Destroy</button>
                </div>
            {{ end }}
        {{ end }}

        {{ if .files }}
            {{ range .files }}
                <div class="file">
                    <h2>{{ .Name }}</h2>
                    <button onclick="downloadFile('{{ .S3Key }}')">Download</button>
                    <button onclick="copyDownloadUrl('{{ .S3Key }}')">Copy Download URL</button>
                    <button onclick="destroy('{{ .S3Key }}')">Destroy</button>
                </div>
            {{ else }}
                <div class="file">No files found.</div>
            {{ end }}
        {{ else }}
            <div class="file">No files found.</div>
        {{ end }}
    </div>
	<button id="logout_button" onclick="logout()">Logout</button>

	<script src="/public/js/js.cookie.js"></script>
	<script src="/public/js/files.js"></script>
</body>
</html>
